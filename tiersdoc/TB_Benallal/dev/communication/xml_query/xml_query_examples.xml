<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<!--
This example includes a list of requests with every request 
that the server should be able to handle (except back extrapolation).
The admin/patient node doesn't contain the institue subnode.
There is only one sample and it has the "likelyhoodUse" subnode 
which is used in the dosage likeliyhood computation.
The most complete request node is the prediction request.
-->

<query version="1.0" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:noNamespaceSchemaLocation="xml_query.xsd">
	
	<queryID>0123456789</queryID>
	<clientID>124568</clientID>
	<date>2018-07-11T13:45:30</date>
	<language>en</language>
	<admin>
		<mandator>
			<person>
			  <id>asdf</id>
				<title>Dr.</title>
				<firstName>John</firstName>
				<lastName>Doe</lastName>
				<address>
					<street>Av. de l'Ours 2</street>
					<postCode>1010</postCode>
					<city>Lausanne</city>
					<state>Vaud</state>
					<country>Suisse</country>
				</address>
				<phone>
					<number>0213140002</number>
					<type>work</type>
				</phone>
				<email>
					<address>john.doe@chuv.com</address>
					<type>professional</type>
				</email>
			</person>
			<institute>
				<id>456789</id>
				<name>CHUV</name>
				<address>
					<street>Av. de l'Ours 1</street>
					<postCode>1010</postCode>
					<city>Lausanne</city>
					<state>Vaud</state>
					<country>Suisse</country>
				</address>
				<phone>
					<number>0213140001</number>
					<type>work</type>
				</phone>
				<email>
					<address>info@chuv.com</address>
					<type>professional</type>
				</email>
			</institute>
		</mandator>
		<patient>
			<person>
				<id>123456</id>
				<firstName>Alice</firstName>
				<middleName></middleName>
				<lastName>Aupaysdesmerveilles</lastName>
				<birthdate>1970-01-01T00:00:00</birthdate>
				<gender>Woman</gender>
				<hospitalStayNumber>1337</hospitalStayNumber>
				<address>
					<street>Av. d'Ouchy 27</street>
					<postCode>1006</postCode>
					<city>Lausanne</city>
					<state>Vaud</state>
					<country>Suisse</country>
				</address>
				<phone>
					<number>0216170002</number>
					<type>work</type>
				</phone>
				<email>
					<address>alice.apdm@gmail.com</address>
					<type>private</type>
				</email>
			</person>
		</patient>
		<clinicalData>
			<date>2018-07-11T13:45:30</date>
			<name>lastcreatinine</name>
			<diagnosis>lorem ipsum</diagnosis>
			<toxicity>lorem ipsum</toxicity>
			<indication>lorem ipsum</indication>
			<response>lorem ipsum</response>
			<value>80.0</value>
		</clinicalData>
	</admin>
	<parameters>
		<patient>
	        <covariates>
	        	<covariate>
	        		<name>birthdate</name>
	        		<date>2018-07-11T10:45:30</date>
	        		<value>1990-01-01T00:00:00</value>
	        		<unit></unit>
              		<dataType>Date</dataType>
	        		<nature>discrete</nature>
	        	</covariate>
	        	<covariate>
	        		<name>bodyweight</name>
	        		<date>2018-07-11T10:45:30</date>
	        		<value>70</value>
	        		<unit>kg</unit>
              		<dataType>Double</dataType>
	        		<nature>discrete</nature>
	        	</covariate>
	        </covariates>
	    </patient>
	    <drugs>
	    	<drug>
		    	<drugID>vancomycin</drugID>
		    	<activePrinciple>something</activePrinciple>
		    	<brandName>somebrand</brandName>
		    	<atc>something</atc>
		    	<treatment>
			    	<dosageHistory>
			    		<dosageTimeRange>
			    			<start>2018-07-06T13:45:30</start>
					    	<end>2018-07-12T13:45:30</end>
					    	<dosage>
					    		<dosageLoop>
						    		<weeklyDosage>
						    			<day>1</day>
						    			<time>12:00:00</time>
						    			<dose>
							        		<value>250</value>
							        		<unit>mg</unit>
							        	</dose>
							        	<formulationAndRoute>
							        		<formulation>ParenteralSolution</formulation>
							        		<administrationName>foo bar</administrationName>
							        		<administrationRoute>IntravenousBolus</administrationRoute>
							        		<absorbtionModel>Intravascular</absorbtionModel>
							        	</formulationAndRoute>
						    		</weeklyDosage>
					    		</dosageLoop>
					    	</dosage>
			    		</dosageTimeRange>
			    	</dosageHistory>
			    </treatment>
			    <samples>
			    	<sample>
			    		<sampleID>123456</sampleID>
			    		<sampleDate>2018-07-08T20:00:00</sampleDate>
			    		<arrivalDate>2018-07-08T22:00:00</arrivalDate>
			    		<concentrations>
			    			<concentration>
				    			<analyteID>vancomycin</analyteID>
				    			<value>10.0</value>
				    			<unit>mg</unit>
				    		</concentration>
			    		</concentrations>
			    		<likelyhoodUse>true</likelyhoodUse>
			    	</sample>
			    </samples>
			    <targets>
			    	<target>
			    		<activeMoietyID>vancomycin</activeMoietyID>
			    		<targetType>residual</targetType>
			    		<unit>mg</unit>
			            <inefficacyAlarm>15</inefficacyAlarm>
			            <min>20</min>
			            <best>25</best>
			            <max>30</max>
			            <toxicityAlarm>50</toxicityAlarm>
			    	</target>
		    	</targets>
		    </drug>
	    </drugs>
	</parameters>
	<requests>
		<request>
			<requestID>123abc</requestID>
			<drugID>vancomycin</drugID>
			<requestType>prediction</requestType>
			<dateInterval>
	    		<start>2018-07-11T13:45:30</start>
	    		<end>2018-07-12T13:45:30</end>
	    	</dateInterval>
	    	<predictionType>best</predictionType>
	    	<graph>
	    		<dateInterval>
		    		<start>2018-07-11T13:45:30</start>
		    		<end>2018-07-12T13:45:30</end>
		    	</dateInterval>
	    		<percentiles>
		    		<percentile>50</percentile>
		    	</percentiles>
	    	</graph>
	    	<percentiles>
	    		<percentile>75</percentile>
	    		<percentile>50</percentile>
	    		<percentile>25</percentile>
	    	</percentiles>
		</request>
		<request>
			<requestID>123abc</requestID>
			<drugID>vancomycin</drugID>
			<requestType>firstDosage</requestType>
		</request>
		<request>
			<requestID>123abc</requestID>
			<drugID>vancomycin</drugID>
			<requestType>dosageRisk</requestType>
			<graph>
	    		<dateInterval>
		    		<start>2018-07-11T13:45:30</start>
		    		<end>2018-07-12T13:45:30</end>
		    	</dateInterval>
	    		<percentiles>
		    		<percentile>50</percentile>
		    	</percentiles>
	    	</graph>
		</request>
		<request>
			<requestID>123abc</requestID>
			<drugID>vancomycin</drugID>
			<requestType>dosageLikelyhood</requestType>
		</request>
		<request>
			<requestID>123abc</requestID>
			<drugID>vancomycin</drugID>
			<requestType>dosageAdaptation</requestType>
	    	<graph>
	    		<dateInterval>
		    		<start>2018-07-11T13:45:30</start>
		    		<end>2018-07-12T13:45:30</end>
		    	</dateInterval>
	    		<percentiles>
		    		<percentile>75</percentile>
		    		<percentile>50</percentile>
		    		<percentile>25</percentile>
		    	</percentiles>
	    	</graph>
		</request>
		<request>
			<requestID>123abc</requestID>
			<drugID>vancomycin</drugID>
			<requestType>sampleDate</requestType>
		</request>
		<request>
			<requestID>123abc</requestID>
			<drugID>vancomycin</drugID>
			<requestType>backextrapolation:dosageSearch</requestType>
			<backextrapolation>
				<sample>
		    		<sampleID>123456</sampleID>
		    		<sampleDate>2018-07-08T20:00:00</sampleDate>
		    		<arrivalDate>2018-07-08T22:00:00</arrivalDate>
		    		<concentrations>
		    			<concentration>
			    			<analyteID>vancomycin</analyteID>
			    			<value>10.0</value>
			    			<unit>mg</unit>
			    		</concentration>
		    		</concentrations>
		    		<likelyhoodUse>true</likelyhoodUse>
		    	</sample>
			</backextrapolation>
		</request>
		<request>
			<requestID>123abc</requestID>
			<drugID>vancomycin</drugID>
			<requestType>backextrapolation:dateSearch</requestType>
			<backextrapolation>
				<incompleteSample>
		    		<sampleID>123456</sampleID>
		    		<arrivalDate>2018-07-08T22:00:00</arrivalDate>
		    		<concentrations>
		    			<concentration>
			    			<analyteID>vancomycin</analyteID>
			    			<value>10.0</value>
			    			<unit>mg</unit>
			    		</concentration>
		    		</concentrations>
		    		<likelyhoodUse>true</likelyhoodUse>
		    	</incompleteSample>
		    	<dosage>
		    		<dosageLoop>
			    		<weeklyDosage>
			    			<day>1</day>
			    			<time>12:00:00</time>
			    			<dose>
				        		<value>250</value>
				        		<unit>mg</unit>
				        	</dose>
				        	<formulationAndRoute>
				        		<formulation>ParenteralSolution</formulation>
				        		<administrationName>foo bar</administrationName>
				        		<administrationRoute>IntravenousBolus</administrationRoute>
				        		<absorbtionModel>Intravascular</absorbtionModel>
				        	</formulationAndRoute>
			    		</weeklyDosage>
		    		</dosageLoop>
		    	</dosage>
			</backextrapolation>
		</request>
		<request>
			<requestID>123abc</requestID>
			<drugID>vancomycin</drugID>
			<requestType>report</requestType>
			<dateInterval>
	    		<start>2018-07-11T13:45:30</start>
	    		<end>2018-07-12T13:45:30</end>
	    	</dateInterval>
	    	<predictionType>best</predictionType>
	    	<percentiles>
	    		<percentile>75</percentile>
	    		<percentile>50</percentile>
	    		<percentile>25</percentile>
	    	</percentiles>
		</request>
	</requests>
</query>
