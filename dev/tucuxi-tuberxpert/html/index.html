<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- CSS -->
    <link href="asset/css/normalize.css" rel="stylesheet" type="text/css">
    <link href="asset/css/tuberxpert.css" rel="stylesheet" type="text/css"  media="screen">

    <!-- JS -->
    <script type="text/javascript" src="asset/js/graphing.js"></script>
    <script type="text/javascript" src="asset/js/graphdata.js"></script>

    <script>


        "use strict";
    
        var img_covariates_disabled_mini = new Image();
        img_covariates_disabled_mini.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AkHBR4h1LQGgAAAAqpJREFUWMPt1k2oVVUUB/DfvVyjr4dlJS8jTJxUlNkoVAiiGhUVWElneIZN4lDmwHQQNmi0R2UftMvJJmggPgyhUUUNhEKjoCZR5iA/IArlhc+P22Q9kPvuvZ7rexHE+0/OOfusj/8567/W3ixjGS1Q1c3Q+6VAp2XiLlZiNY5jFkpOC+yHrF2PHs6UnPqDOXpXYlhyUtXNPmzGD3gU20pOn46wXYOpWFqFmcjzFl6biEAEfAwPl5zWxhfdjiOYHuH2fpCcjfg/45VYX0Cg26JMj+Dry0py4grEO6iD4J34Ee/hmWHGvRYEZrC/qpvpktOJqm624OyomgfOlZzmMIdqnEa6LTRwGAnHq7qZxZfYOkyEbfTUugRV3XTiug3X4WMcxpt4vKqbDUvRlt0xbPtV3XyIXfgT3+IATuJmHKnqZmMI9aoJ9Mb8gU14HjcO69+qbmbwETYu5g/0RgyfTtR9O+7D9wM2t+IYpqq6ebLkdHDMh6zEtTiF/qAOOiOc7sBXeAC7Sk7bB97fhv2hh4R7sQ4X8QE+wSHM263A2yWn3W1LsAdv4KWYZoO4gC34JqbeGhzFX7gJG7AzEv+OV7EXu9uKcB/eweuRbNQe8gvO43QQXYsv8GIMoXX4LTro6dYaKDl9HmV4EM/F+l24p+R0KEzPYxO+Kzldusz/IuZKThdwBk9MNIjmDUpOJ+d3vapuVsRGlKu62YNz6ONYyelS2zacaBAN4BbcgHfxUIhtbOBFD6IBzM+BawaTLxZd/zF6/1Lc/sDQmoqOWVCu3mKCj3k/HV2zGgcjz96S085JS/A31uP+eD4dvb45Es0N8fkJL8e2fQB/xAHlhYk0EK11NAJ8hmdj7J6K560lp7NDXHfg7iC+Hr/GIHpqSY/nV3MWWOoj/TL+H/gHU2DsVLkE3EIAAAAASUVORK5CYII=";
        img_covariates_disabled_mini.onload = function () {
                var img_dosages_disabled_mini = new Image();
                img_dosages_disabled_mini.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AgTBzkbKeJQQQAAAfBJREFUWMPt1bFLlVEYBvBfeiOMiAitqQiChoLCoXBwj2gIyqC+tm8JIoJPSIiEoKkhOAW1niU40D+QuLW0SVNR4BRENRipScMtteUIn6J4vd4bDb5w4HDOy3ue8zzvcw47sRP/exRl1dX6u1oEMY7GOls/8CrFMF2UlRTDlgE0Wsx7mME214DejSdFWT3DHSxvFUBPi3mLmMFhHK+NE5jEbTxuR67GFnKXUgyzmF3TG5fxGZdwF0vdArAqanr/KspqHoda7amOAKix0Is+zLVTo9HGoT01FpaKshrLt3+Ze6UrNmzmhp2uNe4yBnAQb3AxxTDXLResHDiH+ez/Y/nwaymG4XYl6NkCU99TDEMphrMphiFczXsjdfutteJm1my0I1cuOoGpbMNTKYb3eb2vKKup3JynUwzNTkmwyoIphj8YyTVe16wZcBKPUgzNzRjo2Y4FUwyfMI7+oqweFGU1iJv4iBet/A+deIieYjSPe3ntXIphsZNN+BXfNgCygCvYjz0YTTH8bPVfaLRI9dHafL20L7X5bMcfok2e4r1Z8/78JC/gQKcl2IgZuIUjeI4b2LfiilZk2C4Dg3iLmRTDQF6bwHlcSDFMdpOBXtzHOwzXbjyaJRnr9ne8iOt5/rsmyYeirM5sl92d2Il/Fn8BTcKn6imFersAAAAASUVORK5CYII=";
                img_dosages_disabled_mini.onload = function () {
    
                        function runTest(testFunction, testnb, scale, width, height) {
                                var testsdiv = document.getElementById("alltests");
                                var test = document.createElement("div");
                                test.setAttribute("style", "border-style: solid;border-width:1px;margin:3px");
                                var message = document.createElement("div");
                                test.appendChild(message);
                                var can = document.createElement("canvas");
                                can.setAttribute("id", "myCanvas" + testnb);
                                can.setAttribute("width", width);
                                can.setAttribute("height", height);
                                can.setAttribute("style", "height:400px; width:600px;border-style: solid;border-width:1px;margin:3px;");
                                test.appendChild(can);
    
                                testsdiv.appendChild(test);
    
                                var _testFunction = testFunction(),
                                    obj = _testFunction.obj,
                                    expected = _testFunction.expected;
    
                                obj.scale = scale;
    
                                var canvas = document.getElementById("myCanvas" + testnb);
    
                                obj.updateChartDimensions(canvas);
                                obj.canvas = canvas;
                                obj.annotationsCanvas = canvas;
                                obj.clockCanvas = canvas;
    
                                //document.getElementById("expectedMessage" + testnb).innerHTML = expected;
                                message.innerHTML = expected + "<br/>Scale : " + scale + ", width : " + width + ", height: " + height;
    
                                obj.img_covariates_disabled_mini = img_covariates_disabled_mini;
                                obj.img_dosages_disabled_mini = img_dosages_disabled_mini;
    
                                drawGraph(obj);
                                drawAnnotations(obj);
                        }
    
                        var allTests = [test1, test1, test1, test2, testempty, testtarget0, testtarget1, testtarget2, testtarget3, testtarget5, testtarget6, testtarget7, testtarget8, testtarget9, testtarget10, testtarget11, testtarget12];
    
                        runTest(allTests[0], 0, 1, 600, 400);
                        runTest(allTests[1], 1, 2, 1200, 800);
                        runTest(allTests[2], 2, 4, 2400, 1600);
                        for (var i = 3; i < allTests.length; i++) {
                                runTest(allTests[i], i, 2, 1200, 800);
                        }
                };
        };
        </script>
    
</head>
<body class="bg-secondary">
    <div class="page-A4 bg-body">
        
        <!-- Header -->
        <table class="header">
            <tr>
                <td>
                    <img src="asset/img/tucuxi.png" alt="Tucuxi logo">
                </td>
                <td>
                    <h4>TuberXpert report</h4>
                </td>
                <td>
                    <b>Computed on:&nbsp;</b> 08.04.2022
                </td>
            </tr>
        </table>

        <hr>

        <!-- Drug intro -->
        <h3>Drug</h3>
        <table class="drug-intro bg-light-grey">
            <tr>
                <td>
                    <b>Id:&nbsp;</b>hydroxychloroquine
                </td>
                <td>
                    <b>Last dose:&nbsp;</b>800 mg
                </td>
                <td>
                    <b>Drug model:&nbsp;</b>ch.tucuxi.rifampicin.svensson2017
                </td>
            </tr>
        </table>  
        
        
        <!-- Administrative/contacts -->
        <h3>Contacts</h3>
        <table class="contacts-header">
            <tr>
                <th></th>
                <th><img src="asset/img/doctor_64.png" alt="Doctor icon">Mandator</th>
                <th><img src="asset/img/patient_64.png" alt="Patient icon">Patient</th>
            </tr>
        </table>  

        <table class="contacts bg-light-grey">
            <tr>
                <td rowspan="5"><img src="asset/img/person.png" alt="Doctor icon"></td>
                <th>Id</th>
                <td>-</td>
                <td>XXX.XXXX.XXXX.XX.XX</td>
            </tr>
            <tr>
                <th>Name</th>
                <td>Dr. John Doe</td>
                <td>Pierre quiroule</td>
            </tr>
            <tr>
                <th>Address</th>
                <td>Av. de l’Ours2 <br> 1010 Lausanne <br> Vaud <br> Suisse</td>
                <td>Av. de l’Ours2 <br> 1010 Lausanne <br> Vaud <br> Suisse</td>
            </tr>
            <tr>
                <th>Phone</th>
                <td>000 00 00 00 (pro)</td>
                <td>000 00 00 00 (pro)</td>
            </tr>
            <tr>
                <th>Email</th>
                <td>xx@xx.xx (private)</td>
                <td>xx@xx.xx (private)</td>
            </tr>
        </table>  

        <br>

        <table class="contacts bg-light-grey">
            <tr>
                <td rowspan="5"><img src="asset/img/institute.png" alt="Doctor icon"></td>
                <th>id</th>
                <td>C45w9Zx</td>
                <td>A89B2</td>
            </tr>
            <tr>
                <th>Address</th>
                <td>Av. de l’Ours2 <br> 1010 Lausanne <br> Vaud <br> Suisse</td>
                <td>Av. de l’Ours2 <br> 1010 Lausanne <br> Vaud <br> Suisse</td>
            </tr>
            <tr>
                <th>Phone</th>
                <td>000 00 00 00 (pro)</td>
                <td>000 00 00 00 (pro)</td>
            </tr>
            <tr>
                <th>Email</th>
                <td>xx@xx.xx (private)</td>
                <td>xx@xx.xx (private)</td>
            </tr>
        </table>  

        <!-- Administrative/clinical data -->
        <h3>Clinical data</h3>
        <table class="clinical-data bg-light-grey">
            <tr>
                <th>A camel case key formatter</th>
                <td> A value.</td>
            </tr>
            <tr>
                <th>Another key</th>
                <td>Another value</td>
            </tr>
        </table>

        <!-- Covariates -->
        <h3>Covariates</h3>
        <table class="covariates bg-light-grey">
            <tr>
                <th>Fat-Free Mass</th>
                <th>Value: 70 kg (default)</th>
            </tr>
            <tr>
                <td colspan="2"> The fat-free mass of the patient.</td>
            </tr>
            <tr></tr>
            <tr>
                <th>Fat-Free Mass</th>
                <th>Value: -10 kg (patient)</th>
            </tr>
            <tr>
                <td colspan="2"> The fat-free mass of the patient.</td>
            </tr>
            <tr>
                <td colspan="2">
                    <table>
                        <tr class="bg-warning-normal">
                            <td>
                                <img src="asset/img/warning.png" alt="Warning icon">
                            </td>
                            <td>
                                The fat-free mass shall be positive.
                            </td>
                        </tr>
                    </table>    
                </td>
            </tr>
        </table>

        <!-- Treatment -->
        <h3>Treatment</h3>
        <table class="treatment bg-light-grey">
            <tr>
                <td><b>From:&nbsp;</b>2018-07-06 08:00:00</td>
                <td><b>To:&nbsp;</b>2018-07-08 08:00:00</td>
            <tr>
                <td colspan="2">
                    <table>
                        <tr>
                            <td>
                                <img src="asset/img/dot.png" alt="Dot icon">
                            </td>
                            <td>
                                100 mg daily at 10:00:00
                            </td>
                        </tr>
                    </table>    
                </td>
            </tr>
            <tr>
                <td><b>From:&nbsp;</b>2018-07-08 08:00:00</td>
                <td><b>To:&nbsp;</b>2018-07-18 08:00:00</td>
            <tr>
                <td colspan="2">
                    <table>
                        <tr>
                            <td>
                                <img src="asset/img/dot.png" alt="Dot icon">
                            </td>
                            <td>
                                10’000 mg every monday
                            </td>
                        </tr>
                        <tr class="bg-warning-normal">
                            <td>
                                <img src="asset/img/warning.png" alt="Warning icon">
                            </td>
                            <td>
                                Maximum recommended dosage reached ( 1’400 mg)
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <img src="asset/img/dot.png" alt="Dot icon">
                            </td>
                            <td>
                                1200 every 12:00:00
                            </td>
                        </tr>
                    </table>    
                </td>
            </tr>
        </table>

        <!-- Samples -->
        <h3>Samples</h3>
        <table class="samples bg-light-grey">
            <tr>
                <td><b>Date:&nbsp;</b>2018-07-06 08:00:00</td>
                <td><b>Mesure:&nbsp;</b>7mg/l</td>
                <td><b>Percentile:&nbsp;</b>50</td>
            </tr>
            <tr></tr>
            <tr>
                <td><b>Date:&nbsp;</b>2018-07-07 08:00:00</td>
                <td><b>Mesure:&nbsp;</b>700 mg/l</td>
                <td><b>Percentile:&nbsp;</b>100</td>
            </tr>
            <tr>
                <td colspan="3">
                    <table>
                        <tr class="bg-warning-critical">
                            <td>
                                <img src="asset/img/warning.png" alt="Warning icon">
                            </td>
                            <td>
                                100% of the population is below this measure
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td><b>Date:&nbsp;</b>2018-07-08 08:00:00</td>
                <td><b>Mesure:&nbsp;</b>2 mg/l</td>
                <td><b>Percentile:&nbsp;</b>8</td>
            </tr>
            <tr>
                <td colspan="3">
                    <table>
                        <tr class="bg-warning-normal">
                            <td>
                                <img src="asset/img/warning.png" alt="Warning icon">
                            </td>
                            <td>
                                92% of the population is above this measure
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>

        <!-- Samples -->
        <h3>Adjustments</h3>
        <div>Based on the above information, the following adjustments are relevant to achieve the targets.</div>

        <h4>Per interval</h4>

        <div style="color: red;"> GRAPH TO COME </div>

        <h5>Displayed adjustments</h5>
        <table class="adjustments bg-light-grey">
            <tr>
                <th></th>
                <th>From</th>
                <th>To</th>
                <th>Dose</th>
                <th>Interval</th>
                <th>Duration</th>
                <th>Score</th>
            </tr>
            <tr>
                <td><img src="asset/img/dot.png" alt="Dot icon"></td>
                <td>01.05.2022 16:25</td>
                <td>06.05.2022 16:25</td>
                <td>600 mg</td>
                <td>24 hours</td>
                <td>63</td>
                <td>0.95</td>
            </tr>
            <tr>
                <td colspan="7"><div>Loading dose: 800 mg on 01.05.2022 16:25</div></td>
            </tr>
            <tr>
                <td><img src="asset/img/dot.png" alt="Dot icon"></td>
                <td>01.05.2022 16:25</td>
                <td>06.05.2022 16:25</td>
                <td>200 mg</td>
                <td>12 hours</td>
                <td>125</td>
                <td>0.87</td>
            </tr>
        </table>

        <h4>Suggestion</h4>
        <div>Considering the above information, TuberXpert recommends the following adjustment:</div>

        <table class="adjustments bg-light-grey">
            <tr>
                <th></th>
                <th>From</th>
                <th>To</th>
                <th>Dose</th>
                <th>Interval</th>
                <th>Duration</th>
                <th>Score</th>
            </tr>
            <tr>
                <td><img src="asset/img/dot.png" alt="Dot icon"></td>
                <td>01.05.2022 16:25</td>
                <td>06.05.2022 16:25</td>
                <td>600 mg</td>
                <td>24 hours</td>
                <td>63</td>
                <td>0.95</td>
            </tr>
        </table>

        <div style="color: red;"> <br> GRAPH TO COME </div>

        <div>With this new treatment, the targets are expected to change as follows</div>

        <table class="targets bg-light-grey">
            <tr>
                <th></th>
                <th>Type</th>
                <th>Value (unit)</th>
                <th>Score</th>
            </tr>
            <tr>
                <td><img src="asset/img/dot.png" alt="Dot icon"></td>
                <td>Residual</td>
                <td>1103.12 (ug/l)</td>
                <td>0.95</td>
            </tr>
            <tr>
                <td colspan="4"><div>Inefficacy: 0 / <b> Min:750 / Best: 1000 / </b> Max: 1500 / Toxicity: 10000</div></td>
            </tr>
        </table>

        <!-- Pharmacokinetic parameters -->
        <h5 class="underline">Pharmacokinetic parameters</h5>
        <table class="pks bg-light-grey">
            <tr>
                <th></th>
                <th></th>
                <th>Typical patient</th>
                <th>A priori</th>
                <th>A posteriori</th>
            </tr>
            <tr>
                <td><img src="asset/img/dot.png" alt="Dot icon"></td>
                <td>CL</td>
                <td>15.106</td>
                <td>15.202</td>
                <td>15.202</td>
            </tr>
            <tr>
                <td><img src="asset/img/dot.png" alt="Dot icon"></td>
                <td>F</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
            </tr>
        </table>

        <!-- Predictions -->
        <h5 class="underline">Predictions</h5>
        <table class="predictions bg-light-grey">
            <tr>
                <th>Extrapolated steady state AUC24</th>
                <td>36863.6 ug*h/l</td>
            </tr>
            <tr>
                <th>Steady state peak</th>
                <td>2023.58 ug/l</td>
            </tr>
            <tr>
                <th>Steady state trough</th>
                <td>999.701 ug/l</td>
            </tr>
        </table>

        <!-- Copyright -->
        <div class="copyright">
            <span>Copyright (c) HEIG-VD/CHUV - 2022 | Icônes créés par <a href="https://www.flaticon.com/fr/auteurs/gajah-mada" title="institution icônes"> Gajah Mada - Flaticon</a> & <a href="https://www.flaticon.com/fr/auteurs/freepik" title="la personne icônes">Freepik - Flaticon</a></span>
        </div>    

    </div>
</body>
</html>