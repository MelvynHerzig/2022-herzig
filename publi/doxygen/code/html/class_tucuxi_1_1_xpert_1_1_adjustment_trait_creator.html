<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TuberXpert: Tucuxi::Xpert::AdjustmentTraitCreator Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="Sans titre.png"/></td>
  <td id="projectalign">
   <div id="projectname">TuberXpert<span id="projectnumber">&#160;version 1.0</span>
   </div>
   <div id="projectbrief">The expert system that adjusts treatments</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_tucuxi.html">Tucuxi</a></li><li class="navelem"><a class="el" href="namespace_tucuxi_1_1_xpert.html">Xpert</a></li><li class="navelem"><a class="el" href="class_tucuxi_1_1_xpert_1_1_adjustment_trait_creator.html">AdjustmentTraitCreator</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="class_tucuxi_1_1_xpert_1_1_adjustment_trait_creator-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Tucuxi::Xpert::AdjustmentTraitCreator Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This class is responsible for creating the adjustment trait that will be submitted to <a class="el" href="namespace_tucuxi.html">Tucuxi</a> core. It uses the whole dosage history.  
 <a href="class_tucuxi_1_1_xpert_1_1_adjustment_trait_creator.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="adjustmenttraitcreator_8h_source.html">adjustmenttraitcreator.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Tucuxi::Xpert::AdjustmentTraitCreator:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_tucuxi_1_1_xpert_1_1_adjustment_trait_creator.png" usemap="#Tucuxi::Xpert::AdjustmentTraitCreator_map" alt=""/>
  <map id="Tucuxi::Xpert::AdjustmentTraitCreator_map" name="Tucuxi::Xpert::AdjustmentTraitCreator_map">
<area href="class_tucuxi_1_1_xpert_1_1_abstract_xpert_flow_step.html" title="Abstract class that must be implemented by objects that will be returned by a concrete AbstractXpertF..." alt="Tucuxi::Xpert::AbstractXpertFlowStep" shape="rect" coords="0,0,222,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:acd738d85c7554eeee78096090bb63b82"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tucuxi_1_1_xpert_1_1_adjustment_trait_creator.html#acd738d85c7554eeee78096090bb63b82">perform</a> (<a class="el" href="class_tucuxi_1_1_xpert_1_1_xpert_request_result.html">XpertRequestResult</a> &amp;_xpertRequestResult)</td></tr>
<tr class="memdesc:acd738d85c7554eeee78096090bb63b82"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create the adjustment trait based on the information in the <a class="el" href="class_tucuxi_1_1_xpert_1_1_xpert_request_result.html" title="This is object stores the results of TuberXpert flow steps against a given xpertRequest.">XpertRequestResult</a> and set the last intake.  <a href="class_tucuxi_1_1_xpert_1_1_adjustment_trait_creator.html#acd738d85c7554eeee78096090bb63b82">More...</a><br /></td></tr>
<tr class="separator:acd738d85c7554eeee78096090bb63b82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_tucuxi_1_1_xpert_1_1_abstract_xpert_flow_step"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_tucuxi_1_1_xpert_1_1_abstract_xpert_flow_step')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_tucuxi_1_1_xpert_1_1_abstract_xpert_flow_step.html">Tucuxi::Xpert::AbstractXpertFlowStep</a></td></tr>
<tr class="memitem:a7b52236d1b3105ac0bd23f933df8f08c inherit pub_methods_class_tucuxi_1_1_xpert_1_1_abstract_xpert_flow_step"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tucuxi_1_1_xpert_1_1_abstract_xpert_flow_step.html#a7b52236d1b3105ac0bd23f933df8f08c">~AbstractXpertFlowStep</a> ()</td></tr>
<tr class="memdesc:a7b52236d1b3105ac0bd23f933df8f08c inherit pub_methods_class_tucuxi_1_1_xpert_1_1_abstract_xpert_flow_step"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <a href="class_tucuxi_1_1_xpert_1_1_abstract_xpert_flow_step.html#a7b52236d1b3105ac0bd23f933df8f08c">More...</a><br /></td></tr>
<tr class="separator:a7b52236d1b3105ac0bd23f933df8f08c inherit pub_methods_class_tucuxi_1_1_xpert_1_1_abstract_xpert_flow_step"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a959dfadcd7ee756a20deda89391f40bf inherit pub_methods_class_tucuxi_1_1_xpert_1_1_abstract_xpert_flow_step"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tucuxi_1_1_xpert_1_1_abstract_xpert_flow_step.html#a959dfadcd7ee756a20deda89391f40bf">perform</a> (<a class="el" href="class_tucuxi_1_1_xpert_1_1_xpert_request_result.html">XpertRequestResult</a> &amp;_xpertRequestResult)=0</td></tr>
<tr class="memdesc:a959dfadcd7ee756a20deda89391f40bf inherit pub_methods_class_tucuxi_1_1_xpert_1_1_abstract_xpert_flow_step"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to call in order to perform the flow step.  <a href="class_tucuxi_1_1_xpert_1_1_abstract_xpert_flow_step.html#a959dfadcd7ee756a20deda89391f40bf">More...</a><br /></td></tr>
<tr class="separator:a959dfadcd7ee756a20deda89391f40bf inherit pub_methods_class_tucuxi_1_1_xpert_1_1_abstract_xpert_flow_step"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a80a327f9920cd8533c1ba143f47a9e06"><td class="memItemLeft" align="right" valign="top">Core::PredictionParameterType&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tucuxi_1_1_xpert_1_1_adjustment_trait_creator.html#a80a327f9920cd8533c1ba143f47a9e06">getPredictionParameterType</a> (const std::unique_ptr&lt; Core::DrugTreatment &gt; &amp;_drugTreatment) const</td></tr>
<tr class="memdesc:a80a327f9920cd8533c1ba143f47a9e06"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extract the prediction parameter type based on the treatment.  <a href="class_tucuxi_1_1_xpert_1_1_adjustment_trait_creator.html#a80a327f9920cd8533c1ba143f47a9e06">More...</a><br /></td></tr>
<tr class="separator:a80a327f9920cd8533c1ba143f47a9e06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d2fa2a802a88bcb9bba9f30cd5b6000"><td class="memItemLeft" align="right" valign="top">Common::DateTime&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tucuxi_1_1_xpert_1_1_adjustment_trait_creator.html#a5d2fa2a802a88bcb9bba9f30cd5b6000">getAdjustmentTimeAndLastIntake</a> (<a class="el" href="class_tucuxi_1_1_xpert_1_1_xpert_request_result.html">XpertRequestResult</a> &amp;_xpertRequestResult, const Core::FullFormulationAndRoute *_fullFormulationAndRoute) const</td></tr>
<tr class="memdesc:a5d2fa2a802a88bcb9bba9f30cd5b6000"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the adjustment time. Also, if there is one last intake of the patient, set it in the <a class="el" href="class_tucuxi_1_1_xpert_1_1_xpert_request_result.html" title="This is object stores the results of TuberXpert flow steps against a given xpertRequest.">XpertRequestResult</a>.  <a href="class_tucuxi_1_1_xpert_1_1_adjustment_trait_creator.html#a5d2fa2a802a88bcb9bba9f30cd5b6000">More...</a><br /></td></tr>
<tr class="separator:a5d2fa2a802a88bcb9bba9f30cd5b6000"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19dd72e84508aeb8b199abbbf9a839a1"><td class="memItemLeft" align="right" valign="top">Common::DateTime&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tucuxi_1_1_xpert_1_1_adjustment_trait_creator.html#a19dd72e84508aeb8b199abbbf9a839a1">approximateAdjustmentTimeFromIntakes</a> (<a class="el" href="class_tucuxi_1_1_xpert_1_1_xpert_request_result.html">XpertRequestResult</a> &amp;_xpertRequestResult, Core::IntakeSeries _intakes) const</td></tr>
<tr class="memdesc:a19dd72e84508aeb8b199abbbf9a839a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Approximation of the adjustment time bases on the given intake series. This function is called by "getAdjustmentTimeAndLastIntake".  <a href="class_tucuxi_1_1_xpert_1_1_adjustment_trait_creator.html#a19dd72e84508aeb8b199abbbf9a839a1">More...</a><br /></td></tr>
<tr class="separator:a19dd72e84508aeb8b199abbbf9a839a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbebfbdfd3d555068c8dd190d335a809"><td class="memItemLeft" align="right" valign="top">Common::DateTime&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tucuxi_1_1_xpert_1_1_adjustment_trait_creator.html#afbebfbdfd3d555068c8dd190d335a809">getTimeOfNearestFutureOrLatestIntake</a> (Core::IntakeSeries _intakes) const</td></tr>
<tr class="memdesc:afbebfbdfd3d555068c8dd190d335a809"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given an intake series, try to extract the closest intake in the future. If none is found, extract the closed in the past. By closest, we mean "the closest to the computation time".  <a href="class_tucuxi_1_1_xpert_1_1_adjustment_trait_creator.html#afbebfbdfd3d555068c8dd190d335a809">More...</a><br /></td></tr>
<tr class="separator:afbebfbdfd3d555068c8dd190d335a809"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d98fad687f1e72b161c87dcf24f1bb1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tucuxi_1_1_xpert_1_1_adjustment_trait_creator.html#a3d98fad687f1e72b161c87dcf24f1bb1">getLatestIntake</a> (Core::IntakeSeries _intakes, std::unique_ptr&lt; Core::IntakeEvent &gt; &amp;_lastIntake) const</td></tr>
<tr class="memdesc:a3d98fad687f1e72b161c87dcf24f1bb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a pointer on the last intake of the intake series that is before the computation time.  <a href="class_tucuxi_1_1_xpert_1_1_adjustment_trait_creator.html#a3d98fad687f1e72b161c87dcf24f1bb1">More...</a><br /></td></tr>
<tr class="separator:a3d98fad687f1e72b161c87dcf24f1bb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39a6eb69a260d34472860de0cdbc136f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tucuxi_1_1_xpert_1_1_adjustment_trait_creator.html#a39a6eb69a260d34472860de0cdbc136f">getPeriod</a> (const Core::FullFormulationAndRoute *_fullFormulationAndRoute, const <a class="el" href="class_tucuxi_1_1_xpert_1_1_xpert_request_result.html">XpertRequestResult</a> &amp;_xpertRequestResult, const Common::DateTime &amp;_adjustmentTime, Common::DateTime &amp;_start, Common::DateTime &amp;_end) const</td></tr>
<tr class="memdesc:a39a6eb69a260d34472860de0cdbc136f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extract the start and end time of the adjustment.  <a href="class_tucuxi_1_1_xpert_1_1_adjustment_trait_creator.html#a39a6eb69a260d34472860de0cdbc136f">More...</a><br /></td></tr>
<tr class="separator:a39a6eb69a260d34472860de0cdbc136f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58853ea8e3898caef269e68e3239eedd"><td class="memItemLeft" align="right" valign="top">Core::LoadingOption&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tucuxi_1_1_xpert_1_1_adjustment_trait_creator.html#a58853ea8e3898caef269e68e3239eedd">getLoadingOption</a> (const <a class="el" href="class_tucuxi_1_1_xpert_1_1_xpert_request_data.html">XpertRequestData</a> &amp;_request, const Core::FullFormulationAndRoute *_fullFormulationAndRoute) const</td></tr>
<tr class="memdesc:a58853ea8e3898caef269e68e3239eedd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the loading option of the xpertRequest or the full formulation and route if not defined in request.  <a href="class_tucuxi_1_1_xpert_1_1_adjustment_trait_creator.html#a58853ea8e3898caef269e68e3239eedd">More...</a><br /></td></tr>
<tr class="separator:a58853ea8e3898caef269e68e3239eedd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add40ed1e339b3568f95e01089a865903"><td class="memItemLeft" align="right" valign="top">Core::RestPeriodOption&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tucuxi_1_1_xpert_1_1_adjustment_trait_creator.html#add40ed1e339b3568f95e01089a865903">getRestPeriodOption</a> (const <a class="el" href="class_tucuxi_1_1_xpert_1_1_xpert_request_data.html">XpertRequestData</a> &amp;_request, const Core::FullFormulationAndRoute *_fullFormulationAndRoute) const</td></tr>
<tr class="memdesc:add40ed1e339b3568f95e01089a865903"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the rest period option of the xpertRequest or the full formulation and route if not defined in request.  <a href="class_tucuxi_1_1_xpert_1_1_adjustment_trait_creator.html#add40ed1e339b3568f95e01089a865903">More...</a><br /></td></tr>
<tr class="separator:add40ed1e339b3568f95e01089a865903"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab6b54bfa84f86b54dc92f751bc2f853"><td class="memItemLeft" align="right" valign="top">Core::SteadyStateTargetOption&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tucuxi_1_1_xpert_1_1_adjustment_trait_creator.html#aab6b54bfa84f86b54dc92f751bc2f853">getSteadyStateTargetOption</a> (const Core::FullFormulationAndRoute *_fullFormulationAndRoute) const</td></tr>
<tr class="memdesc:aab6b54bfa84f86b54dc92f751bc2f853"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define the steady state target option to be used.  <a href="class_tucuxi_1_1_xpert_1_1_adjustment_trait_creator.html#aab6b54bfa84f86b54dc92f751bc2f853">More...</a><br /></td></tr>
<tr class="separator:aab6b54bfa84f86b54dc92f751bc2f853"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:abbbcda80425179c898eff2c4b3d5656b"><td class="memItemLeft" align="right" valign="top">Common::DateTime&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tucuxi_1_1_xpert_1_1_adjustment_trait_creator.html#abbbcda80425179c898eff2c4b3d5656b">m_computationTime</a></td></tr>
<tr class="memdesc:abbbcda80425179c898eff2c4b3d5656b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fix the computation time to get the same values when testing at different times. Retrieved from the <a class="el" href="class_tucuxi_1_1_xpert_1_1_xpert_request_result.html" title="This is object stores the results of TuberXpert flow steps against a given xpertRequest.">XpertRequestResult</a> in perform method. It allows not to be forced to use local time when time-based calculations are needed.  <a href="class_tucuxi_1_1_xpert_1_1_adjustment_trait_creator.html#abbbcda80425179c898eff2c4b3d5656b">More...</a><br /></td></tr>
<tr class="separator:abbbcda80425179c898eff2c4b3d5656b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >This class is responsible for creating the adjustment trait that will be submitted to <a class="el" href="namespace_tucuxi.html">Tucuxi</a> core. It uses the whole dosage history. </p>
<p >Since this class must compute the intakes of the patient, it also defines his last intake. </p><dl class="section date"><dt>Date</dt><dd>20/06/2022 </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Herzig Melvyn </dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a19dd72e84508aeb8b199abbbf9a839a1" name="a19dd72e84508aeb8b199abbbf9a839a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19dd72e84508aeb8b199abbbf9a839a1">&#9670;&nbsp;</a></span>approximateAdjustmentTimeFromIntakes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Common::DateTime Tucuxi::Xpert::AdjustmentTraitCreator::approximateAdjustmentTimeFromIntakes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tucuxi_1_1_xpert_1_1_xpert_request_result.html">XpertRequestResult</a> &amp;&#160;</td>
          <td class="paramname"><em>_xpertRequestResult</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Core::IntakeSeries&#160;</td>
          <td class="paramname"><em>_intakes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Approximation of the adjustment time bases on the given intake series. This function is called by "getAdjustmentTimeAndLastIntake". </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_xpertRequestResult</td><td><a class="el" href="class_tucuxi_1_1_xpert_1_1_xpert_request_result.html" title="This is object stores the results of TuberXpert flow steps against a given xpertRequest.">XpertRequestResult</a> used to get the half life of the drug model. </td></tr>
    <tr><td class="paramname">_intakes</td><td>Intake series used for approximation. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The adjustment time if found one, otherwise an undefined time. </dd></dl>

</div>
</div>
<a id="a5d2fa2a802a88bcb9bba9f30cd5b6000" name="a5d2fa2a802a88bcb9bba9f30cd5b6000"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d2fa2a802a88bcb9bba9f30cd5b6000">&#9670;&nbsp;</a></span>getAdjustmentTimeAndLastIntake()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Common::DateTime Tucuxi::Xpert::AdjustmentTraitCreator::getAdjustmentTimeAndLastIntake </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tucuxi_1_1_xpert_1_1_xpert_request_result.html">XpertRequestResult</a> &amp;&#160;</td>
          <td class="paramname"><em>_xpertRequestResult</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Core::FullFormulationAndRoute *&#160;</td>
          <td class="paramname"><em>_fullFormulationAndRoute</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the adjustment time. Also, if there is one last intake of the patient, set it in the <a class="el" href="class_tucuxi_1_1_xpert_1_1_xpert_request_result.html" title="This is object stores the results of TuberXpert flow steps against a given xpertRequest.">XpertRequestResult</a>. </p>
<ul>
<li>If the adjustment time is set in the XpertRequest, it returns it.</li>
<li>Otherwise:<ul>
<li>If there is a treatment in progress, it returns the next intake time.</li>
<li>If there is a completed treatment, from the last intake time,it adds 2 * half-life of the drug until the computation time is reached. The resulting time is returned.</li>
<li>If there is no treatment, it returns the computing time plus 1 hour. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_xpertRequestResult</td><td><a class="el" href="class_tucuxi_1_1_xpert_1_1_xpert_request_result.html" title="This is object stores the results of TuberXpert flow steps against a given xpertRequest.">XpertRequestResult</a> containing the treatment and the drug model to extract intakes and the request. </td></tr>
    <tr><td class="paramname">_fullFormulationAndRoute</td><td>Full formulation and route associated to the treatment. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The adjustment time. </dd></dl>
</li>
</ul>
</li>
</ul>

</div>
</div>
<a id="a3d98fad687f1e72b161c87dcf24f1bb1" name="a3d98fad687f1e72b161c87dcf24f1bb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d98fad687f1e72b161c87dcf24f1bb1">&#9670;&nbsp;</a></span>getLatestIntake()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Tucuxi::Xpert::AdjustmentTraitCreator::getLatestIntake </td>
          <td>(</td>
          <td class="paramtype">Core::IntakeSeries&#160;</td>
          <td class="paramname"><em>_intakes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unique_ptr&lt; Core::IntakeEvent &gt; &amp;&#160;</td>
          <td class="paramname"><em>_lastIntake</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get a pointer on the last intake of the intake series that is before the computation time. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_intakes</td><td>Intake series to work with. </td></tr>
    <tr><td class="paramname">_lastIntake</td><td>Unique pointer to store the result. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a58853ea8e3898caef269e68e3239eedd" name="a58853ea8e3898caef269e68e3239eedd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58853ea8e3898caef269e68e3239eedd">&#9670;&nbsp;</a></span>getLoadingOption()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Core::LoadingOption Tucuxi::Xpert::AdjustmentTraitCreator::getLoadingOption </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_tucuxi_1_1_xpert_1_1_xpert_request_data.html">XpertRequestData</a> &amp;&#160;</td>
          <td class="paramname"><em>_request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Core::FullFormulationAndRoute *&#160;</td>
          <td class="paramname"><em>_fullFormulationAndRoute</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieve the loading option of the xpertRequest or the full formulation and route if not defined in request. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_request</td><td>Request where the rest period option may be set. </td></tr>
    <tr><td class="paramname">_fullFormulationAndRoute</td><td>Full formulation and route from which use "isLoadingDoseRecommended" if the XpertRequest does not specify a choice. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The resulting loading option. </dd></dl>

</div>
</div>
<a id="a39a6eb69a260d34472860de0cdbc136f" name="a39a6eb69a260d34472860de0cdbc136f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39a6eb69a260d34472860de0cdbc136f">&#9670;&nbsp;</a></span>getPeriod()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Tucuxi::Xpert::AdjustmentTraitCreator::getPeriod </td>
          <td>(</td>
          <td class="paramtype">const Core::FullFormulationAndRoute *&#160;</td>
          <td class="paramname"><em>_fullFormulationAndRoute</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_tucuxi_1_1_xpert_1_1_xpert_request_result.html">XpertRequestResult</a> &amp;&#160;</td>
          <td class="paramname"><em>_xpertRequestResult</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Common::DateTime &amp;&#160;</td>
          <td class="paramname"><em>_adjustmentTime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Common::DateTime &amp;&#160;</td>
          <td class="paramname"><em>_start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Common::DateTime &amp;&#160;</td>
          <td class="paramname"><em>_end</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Extract the start and end time of the adjustment. </p>
<ul>
<li>If the treatment is not a standard treatment:<ul>
<li>start = adjustment time</li>
<li>end = start + 7 days</li>
</ul>
</li>
<li>else, if the treatment is a standard treatment:<ul>
<li>start = the start time of the oldest time range in the dosage history or the computation time if the dosage history is empty.</li>
<li>end = start + standard treatment duration. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_fullFormulationAndRoute</td><td>Full formulation and route associated to the treatment. </td></tr>
    <tr><td class="paramname">_xpertRequestResult</td><td><a class="el" href="class_tucuxi_1_1_xpert_1_1_xpert_request_result.html" title="This is object stores the results of TuberXpert flow steps against a given xpertRequest.">XpertRequestResult</a> used to get the dosage history and the xpertRequest. </td></tr>
    <tr><td class="paramname">_adjustmentTime</td><td>Estimated adjustment time. </td></tr>
    <tr><td class="paramname">_start</td><td>Resulting start time. </td></tr>
    <tr><td class="paramname">_end</td><td>Resulting end time. </td></tr>
  </table>
  </dd>
</dl>
</li>
</ul>
</li>
</ul>

</div>
</div>
<a id="a80a327f9920cd8533c1ba143f47a9e06" name="a80a327f9920cd8533c1ba143f47a9e06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80a327f9920cd8533c1ba143f47a9e06">&#9670;&nbsp;</a></span>getPredictionParameterType()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Core::PredictionParameterType Tucuxi::Xpert::AdjustmentTraitCreator::getPredictionParameterType </td>
          <td>(</td>
          <td class="paramtype">const std::unique_ptr&lt; Core::DrugTreatment &gt; &amp;&#160;</td>
          <td class="paramname"><em>_drugTreatment</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Extract the prediction parameter type based on the treatment. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_drugTreatment</td><td>Drug treatment used to extract the prediction parameter type. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Core::PredictionParameterType::Aposteriori if there are dosages and samples in the treatment, otherwise Core::PredictionParameterType::Apriori. </dd></dl>

</div>
</div>
<a id="add40ed1e339b3568f95e01089a865903" name="add40ed1e339b3568f95e01089a865903"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add40ed1e339b3568f95e01089a865903">&#9670;&nbsp;</a></span>getRestPeriodOption()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Core::RestPeriodOption Tucuxi::Xpert::AdjustmentTraitCreator::getRestPeriodOption </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_tucuxi_1_1_xpert_1_1_xpert_request_data.html">XpertRequestData</a> &amp;&#160;</td>
          <td class="paramname"><em>_request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Core::FullFormulationAndRoute *&#160;</td>
          <td class="paramname"><em>_fullFormulationAndRoute</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieve the rest period option of the xpertRequest or the full formulation and route if not defined in request. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_request</td><td>Request where the rest period option may be set. </td></tr>
    <tr><td class="paramname">_fullFormulationAndRoute</td><td>Full formulation and route from which use "isRestPeriodRecommended" if the XpertRequest does not specify a choice. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The resulting rest period option. </dd></dl>

</div>
</div>
<a id="aab6b54bfa84f86b54dc92f751bc2f853" name="aab6b54bfa84f86b54dc92f751bc2f853"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab6b54bfa84f86b54dc92f751bc2f853">&#9670;&nbsp;</a></span>getSteadyStateTargetOption()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Core::SteadyStateTargetOption Tucuxi::Xpert::AdjustmentTraitCreator::getSteadyStateTargetOption </td>
          <td>(</td>
          <td class="paramtype">const Core::FullFormulationAndRoute *&#160;</td>
          <td class="paramname"><em>_fullFormulationAndRoute</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Define the steady state target option to be used. </p>
<ul>
<li>If the full formulation and route defines a standard treatment:<ul>
<li>within treatment time range.</li>
</ul>
</li>
<li>Else:<ul>
<li>at steady state. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_fullFormulationAndRoute</td><td>Full formulation and route from the drug model used with the drug treatment which indicates whether it is a standard treatment. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The corresponding steady state target option. </dd></dl>
</li>
</ul>
</li>
</ul>

</div>
</div>
<a id="afbebfbdfd3d555068c8dd190d335a809" name="afbebfbdfd3d555068c8dd190d335a809"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbebfbdfd3d555068c8dd190d335a809">&#9670;&nbsp;</a></span>getTimeOfNearestFutureOrLatestIntake()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Common::DateTime Tucuxi::Xpert::AdjustmentTraitCreator::getTimeOfNearestFutureOrLatestIntake </td>
          <td>(</td>
          <td class="paramtype">Core::IntakeSeries&#160;</td>
          <td class="paramname"><em>_intakes</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given an intake series, try to extract the closest intake in the future. If none is found, extract the closed in the past. By closest, we mean "the closest to the computation time". </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_intakes</td><td>Intake series to work with. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The time found, otherwise an undefined time if the series is empty. </dd></dl>

</div>
</div>
<a id="acd738d85c7554eeee78096090bb63b82" name="acd738d85c7554eeee78096090bb63b82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd738d85c7554eeee78096090bb63b82">&#9670;&nbsp;</a></span>perform()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Tucuxi::Xpert::AdjustmentTraitCreator::perform </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tucuxi_1_1_xpert_1_1_xpert_request_result.html">XpertRequestResult</a> &amp;&#160;</td>
          <td class="paramname"><em>_xpertRequestResult</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create the adjustment trait based on the information in the <a class="el" href="class_tucuxi_1_1_xpert_1_1_xpert_request_result.html" title="This is object stores the results of TuberXpert flow steps against a given xpertRequest.">XpertRequestResult</a> and set the last intake. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_xpertRequestResult</td><td><a class="el" href="class_tucuxi_1_1_xpert_1_1_xpert_request_result.html" title="This is object stores the results of TuberXpert flow steps against a given xpertRequest.">XpertRequestResult</a> containing the xpertRequest, the treatment, and the drug model that will recieve the trait when it is created. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="class_tucuxi_1_1_xpert_1_1_abstract_xpert_flow_step.html#a959dfadcd7ee756a20deda89391f40bf">Tucuxi::Xpert::AbstractXpertFlowStep</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="abbbcda80425179c898eff2c4b3d5656b" name="abbbcda80425179c898eff2c4b3d5656b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbbcda80425179c898eff2c4b3d5656b">&#9670;&nbsp;</a></span>m_computationTime</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Common::DateTime Tucuxi::Xpert::AdjustmentTraitCreator::m_computationTime</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fix the computation time to get the same values when testing at different times. Retrieved from the <a class="el" href="class_tucuxi_1_1_xpert_1_1_xpert_request_result.html" title="This is object stores the results of TuberXpert flow steps against a given xpertRequest.">XpertRequestResult</a> in perform method. It allows not to be forced to use local time when time-based calculations are needed. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>C:/Users/melvy/Desktop/Dev/2022-herzig/dev/tucuxi-tuberxpert/src/tuberxpert/flow/general/<a class="el" href="adjustmenttraitcreator_8h_source.html">adjustmenttraitcreator.h</a></li>
<li>C:/Users/melvy/Desktop/Dev/2022-herzig/dev/tucuxi-tuberxpert/src/tuberxpert/flow/general/<a class="el" href="adjustmenttraitcreator_8cpp.html">adjustmenttraitcreator.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
