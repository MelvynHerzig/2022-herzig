<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TuberXpert: Tucuxi::Xpert::CovariateValidatorAndModelSelector Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="Sans titre.png"/></td>
  <td id="projectalign">
   <div id="projectname">TuberXpert<span id="projectnumber">&#160;version 1.0</span>
   </div>
   <div id="projectbrief">The expert system that adjusts treatments</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_tucuxi.html">Tucuxi</a></li><li class="navelem"><a class="el" href="namespace_tucuxi_1_1_xpert.html">Xpert</a></li><li class="navelem"><a class="el" href="class_tucuxi_1_1_xpert_1_1_covariate_validator_and_model_selector.html">CovariateValidatorAndModelSelector</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="class_tucuxi_1_1_xpert_1_1_covariate_validator_and_model_selector-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Tucuxi::Xpert::CovariateValidatorAndModelSelector Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This is a class responsible for obtaining the best drug model for a given drug and and validating the relevance of covariates.  
 <a href="class_tucuxi_1_1_xpert_1_1_covariate_validator_and_model_selector.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="covariatevalidatorandmodelselector_8h_source.html">covariatevalidatorandmodelselector.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Tucuxi::Xpert::CovariateValidatorAndModelSelector:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_tucuxi_1_1_xpert_1_1_covariate_validator_and_model_selector.png" usemap="#Tucuxi::Xpert::CovariateValidatorAndModelSelector_map" alt=""/>
  <map id="Tucuxi::Xpert::CovariateValidatorAndModelSelector_map" name="Tucuxi::Xpert::CovariateValidatorAndModelSelector_map">
<area href="class_tucuxi_1_1_xpert_1_1_abstract_xpert_flow_step.html" title="Abstract class that must be implemented by objects that will be returned by a concrete AbstractXpertF..." alt="Tucuxi::Xpert::AbstractXpertFlowStep" shape="rect" coords="0,0,303,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a96edddcf73a8790506a1f4079b1240ee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tucuxi_1_1_xpert_1_1_covariate_validator_and_model_selector.html#a96edddcf73a8790506a1f4079b1240ee">perform</a> (<a class="el" href="class_tucuxi_1_1_xpert_1_1_xpert_request_result.html">XpertRequestResult</a> &amp;_xpertRequestResult)</td></tr>
<tr class="memdesc:a96edddcf73a8790506a1f4079b1240ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">For a given <a class="el" href="class_tucuxi_1_1_xpert_1_1_xpert_request_result.html" title="This is object stores the results of TuberXpert flow steps against a given xpertRequest.">XpertRequestResult</a>, get the best drug model and define the <a class="el" href="class_tucuxi_1_1_xpert_1_1_covariate_validation_result.html" title="This class stores the validation result for a patient covariate. This class is created during the &quot;co...">CovariateValidationResult</a> vector.  <a href="class_tucuxi_1_1_xpert_1_1_covariate_validator_and_model_selector.html#a96edddcf73a8790506a1f4079b1240ee">More...</a><br /></td></tr>
<tr class="separator:a96edddcf73a8790506a1f4079b1240ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_tucuxi_1_1_xpert_1_1_abstract_xpert_flow_step"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_tucuxi_1_1_xpert_1_1_abstract_xpert_flow_step')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_tucuxi_1_1_xpert_1_1_abstract_xpert_flow_step.html">Tucuxi::Xpert::AbstractXpertFlowStep</a></td></tr>
<tr class="memitem:a7b52236d1b3105ac0bd23f933df8f08c inherit pub_methods_class_tucuxi_1_1_xpert_1_1_abstract_xpert_flow_step"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tucuxi_1_1_xpert_1_1_abstract_xpert_flow_step.html#a7b52236d1b3105ac0bd23f933df8f08c">~AbstractXpertFlowStep</a> ()</td></tr>
<tr class="memdesc:a7b52236d1b3105ac0bd23f933df8f08c inherit pub_methods_class_tucuxi_1_1_xpert_1_1_abstract_xpert_flow_step"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <a href="class_tucuxi_1_1_xpert_1_1_abstract_xpert_flow_step.html#a7b52236d1b3105ac0bd23f933df8f08c">More...</a><br /></td></tr>
<tr class="separator:a7b52236d1b3105ac0bd23f933df8f08c inherit pub_methods_class_tucuxi_1_1_xpert_1_1_abstract_xpert_flow_step"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a959dfadcd7ee756a20deda89391f40bf inherit pub_methods_class_tucuxi_1_1_xpert_1_1_abstract_xpert_flow_step"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tucuxi_1_1_xpert_1_1_abstract_xpert_flow_step.html#a959dfadcd7ee756a20deda89391f40bf">perform</a> (<a class="el" href="class_tucuxi_1_1_xpert_1_1_xpert_request_result.html">XpertRequestResult</a> &amp;_xpertRequestResult)=0</td></tr>
<tr class="memdesc:a959dfadcd7ee756a20deda89391f40bf inherit pub_methods_class_tucuxi_1_1_xpert_1_1_abstract_xpert_flow_step"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to call in order to perform the flow step.  <a href="class_tucuxi_1_1_xpert_1_1_abstract_xpert_flow_step.html#a959dfadcd7ee756a20deda89391f40bf">More...</a><br /></td></tr>
<tr class="separator:a959dfadcd7ee756a20deda89391f40bf inherit pub_methods_class_tucuxi_1_1_xpert_1_1_abstract_xpert_flow_step"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a6d31e7e1fa4db9142a1564da8ce77bec"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tucuxi_1_1_xpert_1_1_covariate_validator_and_model_selector.html#a6d31e7e1fa4db9142a1564da8ce77bec">checkFormulationsAndRoutesCompatibility</a> (const Core::DosageHistory &amp;_dosageHistory) const</td></tr>
<tr class="memdesc:a6d31e7e1fa4db9142a1564da8ce77bec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check that patient dose formulations and routes are all equal.  <a href="class_tucuxi_1_1_xpert_1_1_covariate_validator_and_model_selector.html#a6d31e7e1fa4db9142a1564da8ce77bec">More...</a><br /></td></tr>
<tr class="separator:a6d31e7e1fa4db9142a1564da8ce77bec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f8082a50e674d256bca941577b7214c"><td class="memItemLeft" align="right" valign="top">Common::DateTime&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tucuxi_1_1_xpert_1_1_covariate_validator_and_model_selector.html#a9f8082a50e674d256bca941577b7214c">getOldestCovariateDateTime</a> (const Core::PatientVariates &amp;_patientCovariates) const</td></tr>
<tr class="memdesc:a9f8082a50e674d256bca941577b7214c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the oldest date of the patient's covariates.  <a href="class_tucuxi_1_1_xpert_1_1_covariate_validator_and_model_selector.html#a9f8082a50e674d256bca941577b7214c">More...</a><br /></td></tr>
<tr class="separator:a9f8082a50e674d256bca941577b7214c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1dbeb9f58f23f873fe4822b9c4f9d57a"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tucuxi_1_1_xpert_1_1_covariate_validator_and_model_selector.html#a1dbeb9f58f23f873fe4822b9c4f9d57a">computeScore</a> (const Core::PatientVariates &amp;_patientCovariates, const Core::CovariateDefinitions &amp;_modelDefinitions, <a class="el" href="namespace_tucuxi_1_1_xpert.html#ad8723ff9ad2dc08ece5d25af8ebc8f3b">OutputLang</a> _lang, std::vector&lt; <a class="el" href="class_tucuxi_1_1_xpert_1_1_covariate_validation_result.html">CovariateValidationResult</a> &gt; &amp;_results) const</td></tr>
<tr class="memdesc:a1dbeb9f58f23f873fe4822b9c4f9d57a"><td class="mdescLeft">&#160;</td><td class="mdescRight">For some given covariate definitions from a drug model, compute the drug model score based on the patient's covariates.  <a href="class_tucuxi_1_1_xpert_1_1_covariate_validator_and_model_selector.html#a1dbeb9f58f23f873fe4822b9c4f9d57a">More...</a><br /></td></tr>
<tr class="separator:a1dbeb9f58f23f873fe4822b9c4f9d57a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8adaebfb52276c84e61c3e853f0570dc"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tucuxi_1_1_xpert_1_1_covariate_validator_and_model_selector.html#a8adaebfb52276c84e61c3e853f0570dc">checkOperation</a> (double _patientConvertedValue, const Core::CovariateDefinition *_definition, const Core::PatientCovariate *_patient, <a class="el" href="namespace_tucuxi_1_1_xpert.html#ad8723ff9ad2dc08ece5d25af8ebc8f3b">OutputLang</a> _lang, std::vector&lt; <a class="el" href="class_tucuxi_1_1_xpert_1_1_covariate_validation_result.html">CovariateValidationResult</a> &gt; &amp;_results) const</td></tr>
<tr class="memdesc:a8adaebfb52276c84e61c3e853f0570dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">For a given covariate definition, obtain its validation operation and check whether the patient covariate's value is valid. If the operation could be performed completely, push the patient's covariate and its definition in the results.  <a href="class_tucuxi_1_1_xpert_1_1_covariate_validator_and_model_selector.html#a8adaebfb52276c84e61c3e853f0570dc">More...</a><br /></td></tr>
<tr class="separator:a8adaebfb52276c84e61c3e853f0570dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75c57c914d2c553e1e6d41df125b0882"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tucuxi_1_1_xpert_1_1_covariate_validator_and_model_selector.html#a75c57c914d2c553e1e6d41df125b0882">checkCovariateDefinitionsSupportedLanguage</a> (const Core::CovariateDefinitions &amp;_modelDefinitions, <a class="el" href="namespace_tucuxi_1_1_xpert.html#ad8723ff9ad2dc08ece5d25af8ebc8f3b">OutputLang</a> _lang) const</td></tr>
<tr class="memdesc:a75c57c914d2c553e1e6d41df125b0882"><td class="mdescLeft">&#160;</td><td class="mdescRight">For a given set of covariate definitions. This method checks that they all support the requested output language or at least English. The name, the description and the validation error message are checked.  <a href="class_tucuxi_1_1_xpert_1_1_covariate_validator_and_model_selector.html#a75c57c914d2c553e1e6d41df125b0882">More...</a><br /></td></tr>
<tr class="separator:a75c57c914d2c553e1e6d41df125b0882"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:aebb2528632c8ae342a200e94f7bc43c4"><td class="memItemLeft" align="right" valign="top">Common::DateTime&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tucuxi_1_1_xpert_1_1_covariate_validator_and_model_selector.html#aebb2528632c8ae342a200e94f7bc43c4">m_computationTime</a></td></tr>
<tr class="memdesc:aebb2528632c8ae342a200e94f7bc43c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fix the computation time to get the same age when executing at different times. Retrieved from the <a class="el" href="class_tucuxi_1_1_xpert_1_1_xpert_request_result.html" title="This is object stores the results of TuberXpert flow steps against a given xpertRequest.">XpertRequestResult</a> in perform method. It allows not to be forced to use local time when time-based calculations are needed.  <a href="class_tucuxi_1_1_xpert_1_1_covariate_validator_and_model_selector.html#aebb2528632c8ae342a200e94f7bc43c4">More...</a><br /></td></tr>
<tr class="separator:aebb2528632c8ae342a200e94f7bc43c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >This is a class responsible for obtaining the best drug model for a given drug and and validating the relevance of covariates. </p>
<p >For each available model of a given drug that matches to the formulation and route of the doses, we calculate a dissimilarity score S based on the covariates of the model. S =∑ (missing covariate) + ∑(covariate not respecting constraint (maximum once per covariate definition)) The model with the lowest dissimilarity score is chosen. In case of a tie, the model with the most covariate definitions is chosen.</p>
<p >The selected drug model must support the xpertRequest language or at least English. If it doesn't, the <a class="el" href="class_tucuxi_1_1_xpert_1_1_xpert_request_result.html" title="This is object stores the results of TuberXpert flow steps against a given xpertRequest.">XpertRequestResult</a> gets its error message set and it is not processed anymore.</p>
<dl class="section date"><dt>Date</dt><dd>18/05/2022 </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Herzig Melvyn </dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a75c57c914d2c553e1e6d41df125b0882" name="a75c57c914d2c553e1e6d41df125b0882"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75c57c914d2c553e1e6d41df125b0882">&#9670;&nbsp;</a></span>checkCovariateDefinitionsSupportedLanguage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Tucuxi::Xpert::CovariateValidatorAndModelSelector::checkCovariateDefinitionsSupportedLanguage </td>
          <td>(</td>
          <td class="paramtype">const Core::CovariateDefinitions &amp;&#160;</td>
          <td class="paramname"><em>_modelDefinitions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_tucuxi_1_1_xpert.html#ad8723ff9ad2dc08ece5d25af8ebc8f3b">OutputLang</a>&#160;</td>
          <td class="paramname"><em>_lang</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>For a given set of covariate definitions. This method checks that they all support the requested output language or at least English. The name, the description and the validation error message are checked. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_modelDefinitions</td><td>List of covariate definitions. </td></tr>
    <tr><td class="paramname">_lang</td><td>Output Desired language. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return true if english or _lang is supported otherwise false. </dd></dl>

</div>
</div>
<a id="a6d31e7e1fa4db9142a1564da8ce77bec" name="a6d31e7e1fa4db9142a1564da8ce77bec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d31e7e1fa4db9142a1564da8ce77bec">&#9670;&nbsp;</a></span>checkFormulationsAndRoutesCompatibility()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Tucuxi::Xpert::CovariateValidatorAndModelSelector::checkFormulationsAndRoutesCompatibility </td>
          <td>(</td>
          <td class="paramtype">const Core::DosageHistory &amp;&#160;</td>
          <td class="paramname"><em>_dosageHistory</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check that patient dose formulations and routes are all equal. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_dosageHistory</td><td>Patient's dosage history. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if all the formulations and routes are equal, otherwise false. </dd></dl>

</div>
</div>
<a id="a8adaebfb52276c84e61c3e853f0570dc" name="a8adaebfb52276c84e61c3e853f0570dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8adaebfb52276c84e61c3e853f0570dc">&#9670;&nbsp;</a></span>checkOperation()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Tucuxi::Xpert::CovariateValidatorAndModelSelector::checkOperation </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>_patientConvertedValue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Core::CovariateDefinition *&#160;</td>
          <td class="paramname"><em>_definition</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Core::PatientCovariate *&#160;</td>
          <td class="paramname"><em>_patient</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_tucuxi_1_1_xpert.html#ad8723ff9ad2dc08ece5d25af8ebc8f3b">OutputLang</a>&#160;</td>
          <td class="paramname"><em>_lang</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="class_tucuxi_1_1_xpert_1_1_covariate_validation_result.html">CovariateValidationResult</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>_results</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>For a given covariate definition, obtain its validation operation and check whether the patient covariate's value is valid. If the operation could be performed completely, push the patient's covariate and its definition in the results. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_patientConvertedValue</td><td>Converted value of the patient covariate to match the unit of definition. </td></tr>
    <tr><td class="paramname">_definition</td><td>Covariate definition to obtain the validation operation and to push in the validation results. </td></tr>
    <tr><td class="paramname">_patient</td><td>Patient covariate to be pushed into the results in case of operation that returns true. </td></tr>
    <tr><td class="paramname">_lang</td><td>Language of the request to get the correct translation of the error message from the definition. </td></tr>
    <tr><td class="paramname">_results</td><td>Vector of covariate validation results to push patient and definition covariate. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">invalid_argument</td><td>When the operation could not be fully performed due to an error. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1dbeb9f58f23f873fe4822b9c4f9d57a" name="a1dbeb9f58f23f873fe4822b9c4f9d57a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1dbeb9f58f23f873fe4822b9c4f9d57a">&#9670;&nbsp;</a></span>computeScore()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned Tucuxi::Xpert::CovariateValidatorAndModelSelector::computeScore </td>
          <td>(</td>
          <td class="paramtype">const Core::PatientVariates &amp;&#160;</td>
          <td class="paramname"><em>_patientCovariates</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Core::CovariateDefinitions &amp;&#160;</td>
          <td class="paramname"><em>_modelDefinitions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_tucuxi_1_1_xpert.html#ad8723ff9ad2dc08ece5d25af8ebc8f3b">OutputLang</a>&#160;</td>
          <td class="paramname"><em>_lang</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="class_tucuxi_1_1_xpert_1_1_covariate_validation_result.html">CovariateValidationResult</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>_results</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>For some given covariate definitions from a drug model, compute the drug model score based on the patient's covariates. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_patientCovariates</td><td>Patient's covariates. </td></tr>
    <tr><td class="paramname">_modelDefinitions</td><td>Covariate definitions of the drug model. </td></tr>
    <tr><td class="paramname">_lang</td><td>Language of the xpertRequest to get the correct translation of the error message of the definition when filling _results. </td></tr>
    <tr><td class="paramname">_results</td><td>Vector to store the covariate validation results for this model. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The score of the model. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">invalid_argument</td><td>When the conversion between the patient covariate and model definition fails, if a definition does not support english and the requested language and if the validation of a covariate definition fails. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9f8082a50e674d256bca941577b7214c" name="a9f8082a50e674d256bca941577b7214c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f8082a50e674d256bca941577b7214c">&#9670;&nbsp;</a></span>getOldestCovariateDateTime()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Common::DateTime Tucuxi::Xpert::CovariateValidatorAndModelSelector::getOldestCovariateDateTime </td>
          <td>(</td>
          <td class="paramtype">const Core::PatientVariates &amp;&#160;</td>
          <td class="paramname"><em>_patientCovariates</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the oldest date of the patient's covariates. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_patientCovariates</td><td>List of patient's covariates. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Date and time of the oldest covariate. If there are no covariates, returns the computation time. </dd></dl>

</div>
</div>
<a id="a96edddcf73a8790506a1f4079b1240ee" name="a96edddcf73a8790506a1f4079b1240ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96edddcf73a8790506a1f4079b1240ee">&#9670;&nbsp;</a></span>perform()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Tucuxi::Xpert::CovariateValidatorAndModelSelector::perform </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tucuxi_1_1_xpert_1_1_xpert_request_result.html">XpertRequestResult</a> &amp;&#160;</td>
          <td class="paramname"><em>_xpertRequestResult</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>For a given <a class="el" href="class_tucuxi_1_1_xpert_1_1_xpert_request_result.html" title="This is object stores the results of TuberXpert flow steps against a given xpertRequest.">XpertRequestResult</a>, get the best drug model and define the <a class="el" href="class_tucuxi_1_1_xpert_1_1_covariate_validation_result.html" title="This class stores the validation result for a patient covariate. This class is created during the &quot;co...">CovariateValidationResult</a> vector. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_xpertRequestResult</td><td><a class="el" href="class_tucuxi_1_1_xpert_1_1_xpert_request_result.html" title="This is object stores the results of TuberXpert flow steps against a given xpertRequest.">XpertRequestResult</a> to process. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="class_tucuxi_1_1_xpert_1_1_abstract_xpert_flow_step.html#a959dfadcd7ee756a20deda89391f40bf">Tucuxi::Xpert::AbstractXpertFlowStep</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="aebb2528632c8ae342a200e94f7bc43c4" name="aebb2528632c8ae342a200e94f7bc43c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebb2528632c8ae342a200e94f7bc43c4">&#9670;&nbsp;</a></span>m_computationTime</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Common::DateTime Tucuxi::Xpert::CovariateValidatorAndModelSelector::m_computationTime</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fix the computation time to get the same age when executing at different times. Retrieved from the <a class="el" href="class_tucuxi_1_1_xpert_1_1_xpert_request_result.html" title="This is object stores the results of TuberXpert flow steps against a given xpertRequest.">XpertRequestResult</a> in perform method. It allows not to be forced to use local time when time-based calculations are needed. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>C:/Users/melvy/Desktop/Dev/2022-herzig/dev/tucuxi-tuberxpert/src/tuberxpert/flow/general/<a class="el" href="covariatevalidatorandmodelselector_8h_source.html">covariatevalidatorandmodelselector.h</a></li>
<li>C:/Users/melvy/Desktop/Dev/2022-herzig/dev/tucuxi-tuberxpert/src/tuberxpert/flow/general/<a class="el" href="covariatevalidatorandmodelselector_8cpp.html">covariatevalidatorandmodelselector.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
